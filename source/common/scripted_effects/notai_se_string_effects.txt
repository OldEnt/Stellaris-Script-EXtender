
 #####						 #####
##### Script Extender Strings #####
 #####						 #####
 # All string effects should be assumed to take 3 calls on the effect stack
 # Strings are used for dynamically creating and modifying names
 # Strings are used for retrieving user inputted data and using said data on your game

 #####						  #####
##### Universal String Effects #####
 #####						  #####
 # Used in all types of strings for their specific reasons, note that performance may differ depending on the list type being operated on

### Returns the full string value
### Parameters
# identifier				- A unique identifier for the given string
# bound_to(optional) 		- The scope that the associated string is stored to
# return_target(optional) 	- The scope to return the string as, will return in the name property, default value is this
# destroy_string(optional) 	- If yes destroys the string after returning the value, default value is no
# param_one(optional) 		- The first parameter scope in a parameterized string
# param_two(optional)		- The second parameter scope in a parameterized string
# param_three(optional)		- The third parameter scope in a parameterized string
# param_four(optional)		- The fourth parameter scope in a parameterized string
# param_five(optional)		- The fifth parameter scope in a parameterized string
# param_six(optional) 		- The sixth parameter scope in a parameterized string
# param_seventh(optional)	- The seventh parameter scope in a parameterized string
# param_eight(optional)		- The eighth parameter scope in a parameterized string
# param_nine(optional)		- The ninth parameter scope in a parameterized string
# param_ten(optional)		- The tenth parameter scope in a parameterized string
# param_list(optional)		- An identifier for a list in the same scope to draw parameters for (disables above param_one through param_ten)
se_return_string = {
	save_global_event_target_as = se_hidden_return_scope
	[[return_target]
	clear_global_event_target = se_hidden_return_scope
	if = {
		limit = { is_scope_set = $return_target$ }
		$return_target$ = { save_global_event_target_as = se_hidden_return_scope }
	}
	else_if = {
		limit = { is_scope_set = event_target:$return_target$ }
		event_target:$return_target$ = { save_global_event_target_as = se_hidden_return_scope }
	}
	else = {
		log_error = "se_return_string: $se_invalid_scope_error$ 'return_target'."
		break = yes
	}
	]
	event_target:se_hidden_return_scope = {
		if = {
			limit = { se_scope_can_be_named = yes }
			set_name = ""
		}
		else = {
			log_error = "se_return_string: $se_set_name_unsupported$"
			break = yes
		}
	}
	[[param_list]
	if = {
		limit = { always = no }
	]
	[[param_one]
	if = {
		limit = { is_scope_set = $param_one$ }
		$param_one$ = { save_global_event_target_as = se_hidden_string_param }
	}
	else_if = {
		limit = { is_scope_set = event_target:$param_one$ }
		event_target:$param_one$ = { save_global_event_target_as = se_hidden_string_param }
	}
	else = {
		log_error = "se_return_string: $se_invalid_scope_error$ 'param_one'"
		break = yes
	}
	owner = {
		se_create_list = {
			identifier = se_param_list
			overwrite = yes
		}
	}
	event_target:se_hidden_string_param = {
		if = {
			limit = { NOT = { se_scope_can_be_named = yes } }
			log_error = "se_return_string: $se_set_name_unsupported$"
			break = yes
		}
		prev.owner = {
			se_create_database_entry = {
				identifier = se_temp_param_one
				overwrite = yes
			}

		}
		event_target:se_return_value = {
			set_name = "\\[Prev.GetName]"
			se_add_entry_to_list = { identifier = se_param_list }
		}
	}
	clear_global_event_target = se_hidden_string_param
	se_clear_return_target = yes
	]
	[[param_two]
	if = {
		limit = { is_scope_set = $param_two$ }
		$param_two$ = { save_global_event_target_as = se_hidden_string_param }
	}
	else_if = {
		limit = { is_scope_set = event_target:$param_two$ }
		event_target:$param_two$ = { save_global_event_target_as = se_hidden_string_param }
	}
	else = {
		log_error = "se_return_string: $se_invalid_scope_error$ 'param_two'"
		break = yes
	}
	event_target:se_hidden_string_param = {
		if = {
			limit = { NOT = { se_scope_can_be_named = yes } }
			log_error = "se_return_string: $se_set_name_unsupported$"
			break = yes
		}
		prev.owner = {
			se_create_database_entry = {
				identifier = se_temp_param_two
				overwrite = yes
			}
		}
		event_target:se_return_value = {
			set_name = "\\[Prev.GetName]"
			se_add_entry_to_list = { identifier = se_param_list }
		}
	}
	clear_global_event_target = se_hidden_string_param
	se_clear_return_target = yes
	]
	[[param_three]
	if = {
		limit = { is_scope_set = $param_three$ }
		$param_three$ = { save_global_event_target_as = se_hidden_string_param }
	}
	else_if = {
		limit = { is_scope_set = event_target:$param_three$ }
		event_target:$param_three$ = { save_global_event_target_as = se_hidden_string_param }
	}
	else = {
		log_error = "se_return_string: $se_invalid_scope_error$ 'param_three'"
		break = yes
	}
	event_target:se_hidden_string_param = {
		if = {
			limit = { NOT = { se_scope_can_be_named = yes } }
			log_error = "se_return_string: $se_set_name_unsupported$"
			break = yes
		}
		prev.owner = {
			se_create_database_entry = {
				identifier = se_temp_param_three
				overwrite = yes
			}
		}
		event_target:se_return_value = {
			set_name = "\\[Prev.GetName]"
			se_add_entry_to_list = { identifier = se_param_list }
		}
	}
	clear_global_event_target = se_hidden_string_param
	se_clear_return_target = yes
	]
	[[param_four]
	if = {
		limit = { is_scope_set = $param_four$ }
		$param_four$ = { save_global_event_target_as = se_hidden_string_param }
	}
	else_if = {
		limit = { is_scope_set = event_target:$param_four$ }
		event_target:$param_four$ = { save_global_event_target_as = se_hidden_string_param }
	}
	else = {
		log_error = "se_return_string: $se_invalid_scope_error$ 'param_four'"
		break = yes
	}
	event_target:se_hidden_string_param = {
		if = {
			limit = { NOT = { se_scope_can_be_named = yes } }
			log_error = "se_return_string: $se_set_name_unsupported$"
			break = yes
		}
		prev.owner = {
			se_create_database_entry = {
				identifier = se_temp_param_four
				overwrite = yes
			}
		}
		event_target:se_return_value = {
			set_name = "\\[Prev.GetName]"
			se_add_entry_to_list = { identifier = se_param_list }
		}
	}
	clear_global_event_target = se_hidden_string_param
	se_clear_return_target = yes
	]
	[[param_five]
	if = {
		limit = { is_scope_set = $param_five$ }
		$param_five$ = { save_global_event_target_as = se_hidden_string_param }
	}
	else_if = {
		limit = { is_scope_set = event_target:$param_five$ }
		event_target:$param_five$ = { save_global_event_target_as = se_hidden_string_param }
	}
	else = {
		log_error = "se_return_string: $se_invalid_scope_error$ 'param_five'"
		break = yes
	}
	event_target:se_hidden_string_param = {
		if = {
			limit = { NOT = { se_scope_can_be_named = yes } }
			log_error = "se_return_string: $se_set_name_unsupported$"
			break = yes
		}
		prev.owner = {
			se_create_database_entry = {
				identifier = se_temp_param_five
				overwrite = yes
			}
		}
		event_target:se_return_value = {
			set_name = "\\[Prev.GetName]"
			se_add_entry_to_list = { identifier = se_param_list }
		}
	}
	clear_global_event_target = se_hidden_string_param
	se_clear_return_target = yes
	]
	[[param_six]
	if = {
		limit = { is_scope_set = $param_six$ }
		$param_six$ = { save_global_event_target_as = se_hidden_string_param }
	}
	else_if = {
		limit = { is_scope_set = event_target:$param_six$ }
		event_target:$param_six$ = { save_global_event_target_as = se_hidden_string_param }
	}
	else = {
		log_error = "se_return_string: $se_invalid_scope_error$ 'param_six'"
		break = yes
	}
	event_target:se_hidden_string_param = {
		if = {
			limit = { NOT = { se_scope_can_be_named = yes } }
			log_error = "se_return_string: $se_set_name_unsupported$"
			break = yes
		}
		prev.owner = {
			se_create_database_entry = {
				identifier = se_temp_param_six
				overwrite = yes
			}
		}
		event_target:se_return_value = {
			set_name = "\\[Prev.GetName]"
			se_add_entry_to_list = { identifier = se_param_list }
		}
	}
	clear_global_event_target = se_hidden_string_param
	se_clear_return_target = yes
	]
	[[param_seven]
	if = {
		limit = { is_scope_set = $param_seven$ }
		$param_seven$ = { save_global_event_target_as = se_hidden_string_param }
	}
	else_if = {
		limit = { is_scope_set = event_target:$param_seven$ }
		event_target:$param_seven$ = { save_global_event_target_as = se_hidden_string_param }
	}
	else = {
		log_error = "se_return_string: $se_invalid_scope_error$ 'param_seven'"
		break = yes
	}
	event_target:se_hidden_string_param = {
		if = {
			limit = { NOT = { se_scope_can_be_named = yes } }
			log_error = "se_return_string: $se_set_name_unsupported$"
			break = yes
		}
		prev.owner = {
			se_create_database_entry = {
				identifier = se_temp_param_seven
				overwrite = yes
			}
		}
		event_target:se_return_value = {
			set_name = "\\[Prev.GetName]"
			se_add_entry_to_list = { identifier = se_param_list }
		}
	}
	clear_global_event_target = se_hidden_string_param
	se_clear_return_target = yes
	]
	[[param_eight]
	if = {
		limit = { is_scope_set = $param_eight$ }
		$param_eight$ = { save_global_event_target_as = se_hidden_string_param }
	}
	else_if = {
		limit = { is_scope_set = event_target:$param_eight$ }
		event_target:$param_eight$ = { save_global_event_target_as = se_hidden_string_param }
	}
	else = {
		log_error = "se_return_string: $se_invalid_scope_error$ 'param_eight'"
		break = yes
	}
	event_target:se_hidden_string_param = {
		if = {
			limit = { NOT = { se_scope_can_be_named = yes } }
			log_error = "se_return_string: $se_set_name_unsupported$"
			break = yes
		}
		prev.owner = {
			se_create_database_entry = {
				identifier = se_temp_param_eight
				overwrite = yes
			}
		}
		event_target:se_return_value = {
			set_name = "\\[Prev.GetName]"
			se_add_entry_to_list = { identifier = se_param_list }
		}
	}
	clear_global_event_target = se_hidden_string_param
	se_clear_return_target = yes
	]
	[[param_nine]
	if = {
		limit = { is_scope_set = $param_nine$ }
		$param_nine$ = { save_global_event_target_as = se_hidden_string_param }
	}
	else_if = {
		limit = { is_scope_set = event_target:$param_nine$ }
		event_target:$param_nine$ = { save_global_event_target_as = se_hidden_string_param }
	}
	else = {
		log_error = "se_return_string: $se_invalid_scope_error$ 'param_nine'"
		break = yes
	}
	event_target:se_hidden_string_param = {
		if = {
			limit = { NOT = { se_scope_can_be_named = yes } }
			log_error = "se_return_string: $se_set_name_unsupported$"
			break = yes
		}
		prev.owner = {
			se_create_database_entry = {
				identifier = se_temp_param_nine
				overwrite = yes
			}
		}
		event_target:se_return_value = {
			set_name = "\\[Prev.GetName]"
			se_add_entry_to_list = { identifier = se_param_list }
		}
	}
	clear_global_event_target = se_hidden_string_param
	se_clear_return_target = yes
	]
	[[param_ten]
	if = {
		limit = { is_scope_set = $param_ten$ }
		$param_ten$ = { save_global_event_target_as = se_hidden_string_param }
	}
	else_if = {
		limit = { is_scope_set = event_target:$param_ten$ }
		event_target:$param_ten$ = { save_global_event_target_as = se_hidden_string_param }
	}
	else = {
		log_error = "se_return_string: $se_invalid_scope_error$ 'param_ten'"
		break = yes
	}
	event_target:se_hidden_string_param = {
		if = {
			limit = { NOT = { se_scope_can_be_named = yes } }
			log_error = "se_return_string: $se_set_name_unsupported$"
			break = yes
		}
		prev.owner = {
			se_create_database_entry = {
				identifier = se_temp_param_ten
				overwrite = yes
			}
		}
		event_target:se_return_value = {
			set_name = "\\[Prev.GetName]"
			se_add_entry_to_list = { identifier = se_param_list }
		}
	}
	clear_global_event_target = se_hidden_string_param
	se_clear_return_target = yes
	]
	[[param_list]
	}
	]
	[[bound_to]
	if = {
		limit = { is_scope_set = $bound_to$ }
		$bound_to$ = { save_global_event_target_as = se_hidden_string_owner_scope }
	}
	else_if = {
		limit = { is_scope_set = event_target:$bound_to$ }
		event_target:$bound_to$ = { save_global_event_target_as = se_hidden_string_owner_scope }
	}
	else = {
		log_error = "se_return_string: $se_invalid_scope_error$ 'bound_to'."
		break = yes
	}
	event_target:se_hidden_string_owner_scope = {
	]
	se_clear_return_target = yes
	se_get_database = { bound_to = this }
	if = {
		limit = { NOT = { exists = event_target:se_return_value } }
		log_error = "se_return_string: $se_unable_to_access_database_error$"
		break = yes
	}
	event_target:se_return_value = { save_global_event_target_as = se_hidden_scoped_database }
	event_target:se_hidden_scoped_database = {
		se_clear_return_target = yes
		se_get_enumerator = { identifier = $identifier$ }
		event_target:se_return_value = {
			se_reset_enumerator = yes
			save_global_event_target_as = se_hidden_current_enumerator
		}
		event_target:se_hidden_current_enumerator = {
			se_enumerator_return_current = yes
			while = {
				limit = { exists = event_target:se_return_value }
				event_target:se_return_value = { save_global_event_target_as = se_substring }
				se_clear_return_target = yes
				event_target:se_substring = {
					if = {
						limit = { has_leader_flag = se_string_parameter }
						se_get_list_entry = {
							identifier = $param_list|se_param_list$
							index = se_param_index
						}
						set_name = "\\[se_return_value.GetName]"
					}
					if = {
						limit = { NOT = { has_leader_flag = se_name_return_value } }
						event_target:se_hidden_return_scope = { set_name = "\\[This.GetName]\\[se_return_value.GetName]" }
					}
					[[destroy_string]
					if = {
						limit = { always = $destroy_string$ }
						se_remove_entry_from_list = { identifier = $identifier$ }
					}
					]
				}
				se_enumerator_move_next = yes
			}
		}
	}
	clear_global_event_target = se_hidden_scoped_database
	clear_global_event_target = se_hidden_return_scope
	[[bound_to]
	}
	clear_global_event_target = se_hidden_string_owner_scope
	]
}

### Appends a number of spaces to the string
### Parameters
# identifier			- A unique identifier for the given string
# count(optional)		- The number of spaces to append to the given string value, default to 1
# bound_to(optional) 	- The scope that the associated string is stored to
# index(optional)		- The index in the string to append these spaces, default value is current count - 1
se_append_space = {
	set_variable = {
		which = se_space_count
		value = $count|1$
	}
	[[index]
	set_variable = {
		which = se_append_index
		value = $index$
	}
	]
	[[bound_to]
	if = {
		limit = { is_scope_set = $bound_to$ }
		$bound_to$ = { save_global_event_target_as = se_hidden_string_owner_scope }
	}
	else_if = {
		limit = { is_scope_set = event_target:$bound_to$ }
		event_target:$bound_to$ = { save_global_event_target_as = se_hidden_string_owner_scope }
	}
	else = {
		log_error = "se_new_string: $se_invalid_scope_error$ 'bound_to'."
		break = yes
	}
	event_target:se_hidden_string_owner_scope = {
	]
	se_clear_return_target = yes
	se_get_database = { bound_to = this }
	if = {
		limit = { exists = event_target:se_return_value }
		event_target:se_return_value = { save_global_event_target_as = se_hidden_scoped_database }
	}
	else = { event_target:se_global_database = { save_global_event_target_as = se_hidden_scoped_database } }
	event_target:se_hidden_scoped_database = {
		[[index]
		set_variable = {
			which = se_temp_append_index
			value = {
				scope = prev[[bound_to].prev]
				value = se_append_index
			}
		}
		]
		se_get_list_header = { identifier = $identifier$ }
		if = {
			limit = { exists = event_target:se_return_value }
			event_target:se_return_value = {
				if = {
					limit = { has_leader_flag = se_comparable_string }
					set_variable = {
						which = se_temp_append_index
						value = prev
					}
					while = {
						limit = {
							check_variable = {
								which = se_temp_append_index
								value != 0
							}
						}
						se_append_char = {
							identifier = $identifier$
							char = space
						}
						subtract_variable = {
							which = se_temp_append_index
							value = 1
						}
					}
					break = yes
				}
			}
		}
		else = {
			log_error = "se_append_to_string: Header for string not found in the current database."
			break = yes
		}
		se_clear_return_target = yes
		se_create_list_entry = {
			identifier = $identifier$
			[[index]index = se_temp_append_index]
		}
		set_variable = {
			which = se_space_count
			value = prev[[bound_to].prev]
		}
		if = {
			limit = {
				check_variable = {
					which = se_space_count
					value > 2
				}
			}
			set_variable = {
				which = se_tri_space_count
				value = se_space_count
			}
			divide_variable = {
				which = se_tri_space_count
				value = 3
			}
			floor_variable = se_tri_space_count
			modulo_variable = {
				which = se_space_count
				value = 3
			}
		}
		if = {
			limit = {
				check_variable = {
					which = se_space_count
					value > 1
				}
			}
			set_variable = {
				which = se_pair_space_count
				value = se_space_count
			}
			divide_variable = {
				which = se_pair_space_count
				value = 2
			}
			floor_variable = se_pair_space_count
			modulo_variable = {
				which = se_space_count
				value = 2
			}
		}
		event_target:se_return_value = {
			if = {
				limit = { is_variable_set = se_tri_space_count }
				while = {
					count < se_tri_space_count
					set_name = "\\[This.GetName]   "
				}
			}
			if = {
				limit = { is_variable_set = se_pair_space_count }
				while = {
					count < se_pair_space_count
					set_name = "\\[This.GetName]  "
				}
			}
			while = {
				count < se_space_count
				set_name = "\\[This.GetName] "
			}
		}
		se_clear_return_target = yes
		# Do some modulus and divison to chunk into 3s, 2s and singular space groups
		[[index]clear_variable = se_temp_append_index]
	}
	clear_global_event_target = se_hidden_scoped_database
	[[bound_to]
	}
	clear_global_event_target = se_hidden_string_owner_scope
	]
	[[index]clear_variable = se_append_index]
	clear_variable = se_space_count
}

 #####						#####
##### Uncomparable strings #####
 #####						#####
 # Non-Comparable strings are easier to build strings and are recommended for creating dynamically named objects
 # These strings are also able to accept other objects as parameters for building a final string value.
 # It is recommended to use these strings when you only need to create a new string and destroy it upon build.

### Creates a new non-comparable string object and links it to the given scope
### Parameters
# identifier 				- A unique identifier for the given string
# text(optional) 			- Creates the string with this text at the base, text must be non spaced
# bind_to_scope(optional) 	- Binds the string to the set object, default value is this
# overwrite(optional) 		- Determines whether or not to delete any existing string with the same identifier, default value is no
se_new_string = {
	[[bind_to_scope]
	if = {
		limit = { is_scope_set = $bind_to_scope$ }
		$bind_to_scope$ = { save_global_event_target_as = se_hidden_string_owner_scope }
	}
	else_if = {
		limit = { is_scope_set = event_target:$bind_to_scope$ }
		event_target:$bind_to_scope$ = { save_global_event_target_as = se_hidden_string_owner_scope }
	}
	else = {
		log_error = "se_new_string: $se_invalid_scope_error$ 'bind_to_scope'."
		break = yes
	}
	event_target:se_hidden_string_owner_scope = {
	]
	if = {
		limit = { se_scope_can_be_named = yes }
		se_clear_return_target = yes
		se_get_or_create_database = { bound_to = this }
		event_target:se_return_value = { save_global_event_target_as = se_database_target }
		se_clear_return_target = yes
		event_target:se_database_target = {
			se_create_list = {
				identifier = $identifier$
				overwrite = yes
			}
		}
		event_target:se_return_value = {
			se_set_database_entry_flag = { flag = se_string_of_@prev }
			[[text]set_name = $text$]
		}
	}
	else = { log_error = "se_append_stringbuilder: $se_set_name_unsupported$" }
	[[bind_to_scope]
	}
	clear_global_event_target = se_hidden_string_owner_scope
	]
}

### Appends a string of non space values to an existing string
### Parameters
# identifier 			- A unique identifier for the given string
# text 					- Creates the string with this text at the base, text must be non spaced
# bound_to(optional) 	- The scope that the associated string is stored to
# index(optional) 		- The index in the string to append this text, default value is current count - 1
se_append_text = {
	[[index]
	set_variable = {
		which = se_append_index
		value = $index$
	}
	]
	[[bound_to]
	if = {
		limit = { is_scope_set = $bound_to$ }
		$bound_to$ = { save_global_event_target_as = se_hidden_string_owner_scope }
	}
	else_if = {
		limit = { is_scope_set = event_target:$bound_to$ }
		event_target:$bound_to$ = { save_global_event_target_as = se_hidden_string_owner_scope }
	}
	else = {
		log_error = "se_append_text: $se_invalid_scope_error$ 'bound_to'."
		break = yes
	}
	event_target:se_hidden_string_owner_scope = {
	]
	se_clear_return_target = yes
	se_get_database = { bound_to = this }
	if = {
		limit = { NOT = { exists = event_target:se_return_value } }
		log_error = "se_append_text: $se_unable_to_access_database_error$"
		break = yes
	}
	event_target:se_return_value = { save_global_event_target_as = se_hidden_scoped_database }
	se_clear_return_target = yes
	event_target:se_hidden_scoped_database = {
		[[index]
		set_variable = {
			which = se_temp_append_index
			value = {
				scope = prev[[bound_to].prev]
				value = se_append_index
			}
		}
		]
		se_get_list_header = { identifier = $identifier$ }
		if = {
			limit = { exists = event_target:se_return_value }
			event_target:se_return_value = {
				if = {
					limit = { has_leader_flag = se_comparable_string }
					log_error = "se_append_text: Attempting to add text to a comparable string, use se_append_char for this string"
					break = yes
				}
			}
		}
		else = {
			log_error = "se_append_text: Header for string not found in the current database."
			break = yes
		}
		se_clear_return_target = yes
		se_create_list_entry = {
			identifier = $identifier$
			[[index]index = se_temp_append_index]
		}
		event_target:se_return_value = { set_name = $text$ }
		[[index]clear_variable = se_temp_append_index]
	}
	clear_global_event_target = se_hidden_scoped_database
	[[bound_to]
	}
	clear_global_event_target = se_hidden_string_owner_scope
	]
	[[index]clear_variable = se_append_index]
	se_clear_return_target = yes
}

### Appends a parameter to be filled in at string return
### Parameters
# identifier 			- A unique identifier for the given string
# param_index 			- The index of the parameter, used when calling the same parameter multiple times
# bound_to(optional) 	- The scope that the associated string is stored to
# index(optional) 		- The index in the string to append this text, default value is current count - 1
se_append_parameter = {
	[[index]
	set_variable = {
		which = se_append_index
		value = $index$
	}
	]
	set_variable = {
		which = se_param_index
		value = $param_index$
	}
	[[bound_to]
	if = {
		limit = { is_scope_set = $bound_to$ }
		$bound_to$ = { save_global_event_target_as = se_hidden_string_owner_scope }
	}
	else_if = {
		limit = { is_scope_set = event_target:$bound_to$ }
		event_target:$bound_to$ = { save_global_event_target_as = se_hidden_string_owner_scope }
	}
	else = { log_error = "se_new_string: $se_invalid_scope_error$ 'bound_to'." }
	event_target:se_hidden_string_owner_scope = {
	]
	se_clear_return_target = yes
	se_get_database = { bound_to = this }
	if = {
		limit = { exists = event_target:se_return_value }
		event_target:se_return_value = { save_global_event_target_as = se_hidden_scoped_database }
	}
	else = { event_target:se_global_database = { save_global_event_target_as = se_hidden_scoped_database } }
	event_target:se_hidden_scoped_database = {
		[[index]
		set_variable = {
			which = se_temp_append_index
			value = {
				scope = prev[[bound_to].prev]
				value = se_append_index
			}
		}
		]
		se_create_list_entry = {
			identifier = $identifier$
			[[index]index = se_temp_append_index]
		}
		event_target:se_return_value = {
			se_set_database_entry_flag = { flag = se_string_parameter }
			set_variable = {
				which = se_param_index
				value = prev.prev[[bound_to].prev]
			}
		}
		se_clear_return_target = yes
		[[index]clear_variable = se_temp_append_index]
	}
	clear_global_event_target = se_hidden_scoped_database
	[[bound_to]
	}
	clear_global_event_target = se_hidden_string_owner_scope
	]
	clear_variable = se_param_index
	[[index]clear_variable = se_append_index]
}

 #####				   #####
##### Comparable String #####
 #####				   #####
 # Comparable strings are similar to default strings but lack certain features to allow for string and character based equality
 # Comparable strings CANNOT have parameters due to their dynamic values
 # These strings are used for user input and for comparing string values in the niche cases you need them

### Creates a new string which is capable of being compared to another string
### Parameters
# identifier 				- A database unique identifier for the given string
# char(optional)			- The root character in the string, NOTE that a char is a single ascii character, such as 'a', '1', or '!'
# bind_to_scope(optional) 	- Binds the string to the set object, default value is this
# overwrite(optional) 		- Determines whether or not to delete any existing string with the same identifier, default value is no
se_new_comparable_string = {
	[[bind_to_scope]
	if = {
		limit = { is_scope_set = $bind_to_scope$ }
		$bind_to_scope$ = { save_global_event_target_as = se_hidden_string_owner_scope }
	}
	else_if = {
		limit = { is_scope_set = event_target:$bind_to_scope$ }
		event_target:$bind_to_scope$ = { save_global_event_target_as = se_hidden_string_owner_scope }
	}
	else = { log_error = "se_new_string: $se_invalid_scope_error$ 'bind_to_scope'." }
	event_target:se_hidden_string_owner_scope = {
	]
	if = {
		limit = { se_scope_can_be_named = yes }
		se_ensure_string_dictionary_exists = yes
		se_clear_return_target = yes
		se_create_database = {
			bind_to_scope = $bind_to_scope$
			overwrite = no
		}
		event_target:se_return_value = { save_global_event_target_as = se_database_target }
		se_clear_return_target = yes
		event_target:se_database_target = {
			se_create_list = {
				identifier = $identifier$
				overwrite = yes
			}
		}
		event_target:se_return_value = {
			se_set_database_entry_flag = { flag = se_string_of_@prev }
			se_set_database_entry_flag = { flag = se_comparable_string }
			[[char]set_name = $char$]
		}
	}
	else = { log_error = "se_append_stringbuilder: $se_set_name_unsupported$" }
	[[bind_to_scope]
	}
	clear_global_event_target = se_hidden_string_owner_scope
	]
}

### Appends a new character in a method that it can be compared vs other strings
### Parameters
# identifier 			- A unique identifier for the given string
# char					- The character to add to the string, NOTE that a char is a single ascii character, such as 'a', '1', or '!'
# bound_to(optional) 	- The scope that the associated string is stored to
# index(optional) 		- The index in the string to append this text, default value is current count - 1
se_append_char = {
	[[index]
	set_variable = {
		which = se_append_index
		value = $index$
	}
	]
	se_ensure_string_dictionary_exists = yes
	event_target:se_char_dictionary = {
		se_get_database_entry = { identifier = se_char_$char$ }
		if = {
			limit = { exists = event_target:se_return_value }
			event_target:se_return_value = { save_global_event_target_as = se_hidden_char_value }
		}
		else = {
			log_error = "se_append_char: Invalid char passed to string value."
			break = yes
		}
	}
	[[bound_to]
	if = {
		limit = { is_scope_set = $bound_to$ }
		$bound_to$ = { save_global_event_target_as = se_hidden_string_owner_scope }
	}
	else_if = {
		limit = { is_scope_set = event_target:$bound_to$ }
		event_target:$bound_to$ = { save_global_event_target_as = se_hidden_string_owner_scope }
	}
	else = {
		log_error = "se_append_char: $se_invalid_scope_error$ 'bound_to'."
		break = yes
	}
	event_target:se_hidden_string_owner_scope = {
	]
	se_clear_return_target = yes
	se_get_database = { bound_to = this }
	if = {
		limit = { NOT = { exists = event_target:se_return_value } }
		log_error = "se_append_char: $se_unable_to_access_database_error$"
		break = yes
	}
	event_target:se_return_value = { save_global_event_target_as = se_hidden_scoped_database }
	event_target:se_hidden_scoped_database = {
		[[index]
		set_variable = {
			which = se_temp_append_index
			value = {
				scope = prev[[bound_to].prev]
				value = se_append_index
			}
		}
		]
		se_create_list_entry = {
			identifier = $identifier$
			[[index]index = se_temp_append_index]
		}
		event_target:se_hidden_char_value = {
			event_target:se_return_value = {
				set_variable = {
					which = se_character_value
					value = prev
				}
				set_name = "\\[Prev.GetName]"
			}
		}
		[[index]clear_variable = se_temp_append_index]
	}
	[[bound_to]
	}
	clear_global_event_target = se_hidden_string_owner_scope
	]
	clear_global_event_target = se_hidden_char_value
	[[index]clear_variable = se_append_index]
	se_clear_return_target = yes
}

### Internal use, do not use outside of code within this mod
se_ensure_string_dictionary_exists = {
	se_clear_return_target = yes
	if = {
		limit = { NOT = { exists = event_target:se_char_dictionary } }
		se_create_database = {
			identifier = se_internal_string_dictionary
			overwrite = no
		}
		event_target:se_return_value = { save_global_event_target_as = se_hidden_scoped_database }
		event_target:se_hidden_scoped_database = {
			# Lowercase Letters
			se_create_database_entry = {
				identifier = se_char_a
				name = a
			}
			event_target:se_return_value = {
				set_variable = {
					which = se_character_value
					value = 0
				}
			}
			se_create_database_entry = {
				identifier = se_char_b
				name = b
			}
			event_target:se_return_value = {
				set_variable = {
					which = se_character_value
					value = 1
				}
			}
			se_create_database_entry = {
				identifier = se_char_c
				name = c
			}
			event_target:se_return_value = {
				set_variable = {
					which = se_character_value
					value = 2
				}
			}
			se_create_database_entry = {
				identifier = se_char_d
				name = d
			}
			event_target:se_return_value = {
				set_variable = {
					which = se_character_value
					value = 3
				}
			}
			se_create_database_entry = {
				identifier = se_char_e
				name = e
			}
			event_target:se_return_value = {
				set_variable = {
					which = se_character_value
					value = 4
				}
			}
			se_create_database_entry = {
				identifier = se_char_f
				name = f
			}
			event_target:se_return_value = {
				set_variable = {
					which = se_character_value
					value = 5
				}
			}
			se_create_database_entry = {
				identifier = se_char_g
				name = g
			}
			event_target:se_return_value = {
				set_variable = {
					which = se_character_value
					value = 6
				}
			}
			se_create_database_entry = {
				identifier = se_char_h
				name = h
			}
			event_target:se_return_value = {
				set_variable = {
					which = se_character_value
					value = 7
				}
			}
			se_create_database_entry = {
				identifier = se_char_i
				name = i
			}
			event_target:se_return_value = {
				set_variable = {
					which = se_character_value
					value = 8
				}
			}
			se_create_database_entry = {
				identifier = se_char_j
				name = j
			}
			event_target:se_return_value = {
				set_variable = {
					which = se_character_value
					value = 9
				}
			}
			se_create_database_entry = {
				identifier = se_char_k
				name = k
			}
			event_target:se_return_value = {
				set_variable = {
					which = se_character_value
					value = 10
				}
			}
			se_create_database_entry = {
				identifier = se_char_l
				name = l
			}
			event_target:se_return_value = {
				set_variable = {
					which = se_character_value
					value = 11
				}
			}
			se_create_database_entry = {
				identifier = se_char_m
				name = m
			}
			event_target:se_return_value = {
				set_variable = {
					which = se_character_value
					value = 12
				}
			}
			se_create_database_entry = {
				identifier = se_char_n
				name = n
			}
			event_target:se_return_value = {
				set_variable = {
					which = se_character_value
					value = 13
				}
			}
			se_create_database_entry = {
				identifier = se_char_o
				name = o
			}
			event_target:se_return_value = {
				set_variable = {
					which = se_character_value
					value = 14
				}
			}
			se_create_database_entry = {
				identifier = se_char_p
				name = p
			}
			event_target:se_return_value = {
				set_variable = {
					which = se_character_value
					value = 15
				}
			}
			se_create_database_entry = {
				identifier = se_char_q
				name = q
			}
			event_target:se_return_value = {
				set_variable = {
					which = se_character_value
					value = 16
				}
			}
			se_create_database_entry = {
				identifier = se_char_r
				name = r
			}
			event_target:se_return_value = {
				set_variable = {
					which = se_character_value
					value = 17
				}
			}
			se_create_database_entry = {
				identifier = se_char_s
				name = s
			}
			event_target:se_return_value = {
				set_variable = {
					which = se_character_value
					value = 18
				}
			}
			se_create_database_entry = {
				identifier = se_char_t
				name = t
			}
			event_target:se_return_value = {
				set_variable = {
					which = se_character_value
					value = 19
				}
			}
			se_create_database_entry = {
				identifier = se_char_u
				name = u
			}
			event_target:se_return_value = {
				set_variable = {
					which = se_character_value
					value = 20
				}
			}
			se_create_database_entry = {
				identifier = se_char_v
				name = v
			}
			event_target:se_return_value = {
				set_variable = {
					which = se_character_value
					value = 21
				}
			}
			se_create_database_entry = {
				identifier = se_char_w
				name = w
			}
			event_target:se_return_value = {
				set_variable = {
					which = se_character_value
					value = 22
				}
			}
			se_create_database_entry = {
				identifier = se_char_x
				name = x
			}
			event_target:se_return_value = {
				set_variable = {
					which = se_character_value
					value = 23
				}
			}
			se_create_database_entry = {
				identifier = se_char_y
				name = y
			}
			event_target:se_return_value = {
				set_variable = {
					which = se_character_value
					value = 24
				}
			}
			se_create_database_entry = {
				identifier = se_char_z
				name = z
			}
			event_target:se_return_value = {
				set_variable = {
					which = se_character_value
					value = 25
				}
			}
			# Capital Letters
			se_create_database_entry = {
				identifier = se_char_A
				name = A
			}
			event_target:se_return_value = {
				set_variable = {
					which = se_character_value
					value = 26
				}
			}
			se_create_database_entry = {
				identifier = se_char_B
				name = B
			}
			event_target:se_return_value = {
				set_variable = {
					which = se_character_value
					value = 27
				}
			}
			se_create_database_entry = {
				identifier = se_char_C
				name = C
			}
			event_target:se_return_value = {
				set_variable = {
					which = se_character_value
					value = 28
				}
			}
			se_create_database_entry = {
				identifier = se_char_D
				name = D
			}
			event_target:se_return_value = {
				set_variable = {
					which = se_character_value
					value = 29
				}
			}
			se_create_database_entry = {
				identifier = se_char_E
				name = E
			}
			event_target:se_return_value = {
				set_variable = {
					which = se_character_value
					value = 30
				}
			}
			se_create_database_entry = {
				identifier = se_char_F
				name = F
			}
			event_target:se_return_value = {
				set_variable = {
					which = se_character_value
					value = 31
				}
			}
			se_create_database_entry = {
				identifier = se_char_G
				name = G
			}
			event_target:se_return_value = {
				set_variable = {
					which = se_character_value
					value = 32
				}
			}
			se_create_database_entry = {
				identifier = se_char_H
				name = H
			}
			event_target:se_return_value = {
				set_variable = {
					which = se_character_value
					value = 33
				}
			}
			se_create_database_entry = {
				identifier = se_char_I
				name = I
			}
			event_target:se_return_value = {
				set_variable = {
					which = se_character_value
					value = 34
				}
			}
			se_create_database_entry = {
				identifier = se_char_J
				name = J
			}
			event_target:se_return_value = {
				set_variable = {
					which = se_character_value
					value = 35
				}
			}
			se_create_database_entry = {
				identifier = se_char_K
				name = K
			}
			event_target:se_return_value = {
				set_variable = {
					which = se_character_value
					value = 36
				}
			}
			se_create_database_entry = {
				identifier = se_char_L
				name = L
			}
			event_target:se_return_value = {
				set_variable = {
					which = se_character_value
					value = 37
				}
			}
			se_create_database_entry = {
				identifier = se_char_M
				name = M
			}
			event_target:se_return_value = {
				set_variable = {
					which = se_character_value
					value = 38
				}
			}
			se_create_database_entry = {
				identifier = se_char_N
				name = N
			}
			event_target:se_return_value = {
				set_variable = {
					which = se_character_value
					value = 39
				}
			}
			se_create_database_entry = {
				identifier = se_char_O
				name = O
			}
			event_target:se_return_value = {
				set_variable = {
					which = se_character_value
					value = 40
				}
			}
			se_create_database_entry = {
				identifier = se_char_P
				name = P
			}
			event_target:se_return_value = {
				set_variable = {
					which = se_character_value
					value = 41
				}
			}
			se_create_database_entry = {
				identifier = se_char_Q
				name = Q
			}
			event_target:se_return_value = {
				set_variable = {
					which = se_character_value
					value = 42
				}
			}
			se_create_database_entry = {
				identifier = se_char_R
				name = R
			}
			event_target:se_return_value = {
				set_variable = {
					which = se_character_value
					value = 43
				}
			}
			se_create_database_entry = {
				identifier = se_char_S
				name = S
			}
			event_target:se_return_value = {
				set_variable = {
					which = se_character_value
					value = 44
				}
			}
			se_create_database_entry = {
				identifier = se_char_T
				name = T
			}
			event_target:se_return_value = {
				set_variable = {
					which = se_character_value
					value = 45
				}
			}
			se_create_database_entry = {
				identifier = se_char_U
				name = U
			}
			event_target:se_return_value = {
				set_variable = {
					which = se_character_value
					value = 46
				}
			}
			se_create_database_entry = {
				identifier = se_char_V
				name = V
			}
			event_target:se_return_value = {
				set_variable = {
					which = se_character_value
					value = 47
				}
			}
			se_create_database_entry = {
				identifier = se_char_W
				name = W
			}
			event_target:se_return_value = {
				set_variable = {
					which = se_character_value
					value = 48
				}
			}
			se_create_database_entry = {
				identifier = se_char_X
				name = X
			}
			event_target:se_return_value = {
				set_variable = {
					which = se_character_value
					value = 49
				}
			}
			se_create_database_entry = {
				identifier = se_char_Y
				name = Y
			}
			event_target:se_return_value = {
				set_variable = {
					which = se_character_value
					value = 50
				}
			}
			se_create_database_entry = {
				identifier = se_char_Z
				name = Z
			}
			event_target:se_return_value = {
				set_variable = {
					which = se_character_value
					value = 51
				}
			}
			# Number Chars
			se_create_database_entry = {
				identifier = se_char_0
				name = 0
			}
			event_target:se_return_value = {
				set_variable = {
					which = se_character_value
					value = 52
				}
			}
			se_create_database_entry = {
				identifier = se_char_1
				name = 1
			}
			event_target:se_return_value = {
				set_variable = {
					which = se_character_value
					value = 53
				}
			}
			se_create_database_entry = {
				identifier = se_char_2
				name = 2
			}
			event_target:se_return_value = {
				set_variable = {
					which = se_character_value
					value = 54
				}
			}
			se_create_database_entry = {
				identifier = se_char_3
				name = 3
			}
			event_target:se_return_value = {
				set_variable = {
					which = se_character_value
					value = 55
				}
			}
			se_create_database_entry = {
				identifier = se_char_4
				name = 4
			}
			event_target:se_return_value = {
				set_variable = {
					which = se_character_value
					value = 56
				}
			}
			se_create_database_entry = {
				identifier = se_char_5
				name = 5
			}
			event_target:se_return_value = {
				set_variable = {
					which = se_character_value
					value = 57
				}
			}
			se_create_database_entry = {
				identifier = se_char_6
				name = 6
			}
			event_target:se_return_value = {
				set_variable = {
					which = se_character_value
					value = 58
				}
			}
			se_create_database_entry = {
				identifier = se_char_7
				name = 7
			}
			event_target:se_return_value = {
				set_variable = {
					which = se_character_value
					value = 59
				}
			}
			se_create_database_entry = {
				identifier = se_char_8
				name = 8
			}
			event_target:se_return_value = {
				set_variable = {
					which = se_character_value
					value = 60
				}
			}
			se_create_database_entry = {
				identifier = se_char_9
				name = 9
			}
			event_target:se_return_value = {
				set_variable = {
					which = se_character_value
					value = 61
				}
			}
			# Special Chars
			se_create_database_entry = { identifier = se_char_space }
			event_target:se_return_value = {
				set_variable = {
					which = se_character_value
					value = 61
				}
				set_name = " "
			}
			save_global_event_target_as = se_char_dictionary
			}
		clear_global_event_target = se_hidden_scoped_database
	}
}

### Compares two strings for equality
### Parameters
# identifier					- A database unique identifier for the first string
# bound_to(optional)			- The scope that the primary string is stored to
# compare_identifier			- A database unique identifier for the comparing string
# compare_database(optional)	- The database containing the comparing string
# compare_owner(optional)		- The owner scope of the comparing string(Will not execute if compare_database is passed)
se_compare_string = {
	se_internal_reset_comparison = yes
	[[compare_database]
	if = {
		limit = { is_scope_set = $compare_database$ }
		$compare_database$ = { save_global_event_target_as = se_hidden_compare_database }
	}
	else_if = {
		limit = { is_scope_set = event_target:$compare_database$ }
		event_target:$compare_database$ = { save_global_event_target_as = se_hidden_compare_database }
	}
	else = {
		log_error = "se_compare_string: $se_invalid_database_reference$ 'compare_database'"
		break = yes
	}
	]
	[[compare_owner]
	if = {
		limit = { NOT = { exists = event_target:se_hidden_compare_database } }
		if = {
			limit = { is_scope_set = $compare_owner$ }
			$compare_database$ = { save_global_event_target_as = se_hidden_compare_owner }
		}
		else_if = {
			limit = { is_scope_set = event_target:$compare_owner$ }
			event_target:$compare_database$ = { save_global_event_target_as = se_hidden_compare_owner }
		}
		else = {
			log_error = "se_compare_string: $se_invalid_database_reference$ 'compare_database'"
			break = yes
		}
		event_target:se_hidden_compare_owner = {
			se_clear_return_target = yes
			se_get_database = { bound_to = this }
		}
		if = {
			limit = { NOT = { exists = event_target:se_return_value } }
			clear_global_event_target = se_hidden_compare_owner
			log_error = "se_compare_string: $se_invalid_scope_error$ 'compare_owner'"
			break = yes
		}
		event_target:se_return_value = { save_global_event_target_as = se_hidden_compare_database }
		clear_global_event_target = se_hidden_compare_owner
	}
	]
	[[bound_to]
	if = {
		limit = { is_scope_set = $bound_to$ }
		$bound_to$ = { save_global_event_target_as = se_hidden_string_owner_scope }
	}
	else_if = {
		limit = { is_scope_set = event_target:$bound_to$ }
		event_target:$bound_to$ = { save_global_event_target_as = se_hidden_string_owner_scope }
	}
	else = {
		log_error = "se_compare_string: $se_invalid_scope_error$ 'bound_to'."
		break = yes
	}
	event_target:se_hidden_string_owner_scope = {
	]
	se_clear_return_target = yes
	se_get_database = { bound_to = this }
	if = {
		limit = { NOT = { exists = event_target:se_return_value } }
		log_error = "se_compare_string: $se_unable_to_access_database_error$"
		break = yes
	}
	event_target:se_return_value = {
		save_global_event_target_as = se_hidden_scoped_database
		if = {
			limit = { NOT = { exists = event_target:se_hidden_compare_database } }
			save_global_event_target_as = se_hidden_compare_database
		}
	}
	event_target:se_hidden_scoped_database = {
		se_clear_return_target = yes
		se_get_enumerator = { identifier = $identifier$ }]
		if = {
			limit = { NOT = { exists = event_target:se_return_value } }
			log_error = "se_compare_string: $se_unable_to_access_database_error$"
			break = yes
		}
		event_target:se_return_value = { save_global_event_target_as = se_hidden_scoped_database_enumerator }
		se_clear_return_target = yes
		event_target:se_hidden_scoped_database_enumerator = {
			se_enumerator_return_current = yes
			event_target:se_return_value = { save_global_event_target_as = se_hidden_char_value }
			se_clear_return_target = yes
			se_internal_set_comparison_true = yes
			while = {
				limit = { exists = event_target:se_hidden_char_value }
				event_target:se_hidden_char_value = {
					if = {
						limit = { is_variable_set = se_character_value }
						event_target:se_hidden_compare_database = {
							se_get_list_entry = {
								identifier = $compare_identifier$
								index = se_hidden_index
							}
							event_target:se_return_value = {
								if = {
									limit = { is_variable_set = se_character_value }
									set_variable = {
										which = se_hidden_char_comparison
										value = {
											scope = event_target:se_hidden_char_value
											variable = se_list_index
										}
									}
									if = {
										limit = {
											check_variable = {
												which = se_list_index
												value != se_hidden_char_comparison
											}
										}
										clear_variable = se_hidden_char_comparison
										se_internal_set_comparison_false = yes
										break = yes
									}
									clear_variable = se_hidden_char_comparison
								}
								else = {
									se_internal_set_comparison_false = yes
									log_error = "se_compare_string: $se_invalid_comparable_token$"
									break = yes
								}
							}
						}
					}
					else = {
						log_error = "se_compare_string: $se_invalid_comparable_token$"
						break = yes
					}
				}
			}
			se_clear_return_target = yes
			if = {
				limit = { exists = event_target:se_hidden_char_value }
				clear_global_event_target = se_hidden_char_value
			}
		}
	}
	clear_global_event_target = se_hidden_scoped_database
	clear_global_event_target = se_hidden_compare_database
	[[bound_to]
	}
	clear_global_event_target = se_hidden_string_owner_scope
	]
}